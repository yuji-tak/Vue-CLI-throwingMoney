(function(t){function e(e){for(var s,o,a=e[0],c=e[1],u=e[2],d=0,f=[];d<a.length;d++)o=a[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&f.push(r[o][0]),r[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);l&&l(e);while(f.length)f.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],s=!0,a=1;a<n.length;a++){var c=n[a];0!==r[c]&&(s=!1)}s&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var s={},r={app:0},i=[];function o(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=s,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(n,s,function(e){return t[e]}.bind(null,s));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/Vue-CLI-throwingMoney/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var u=0;u<a.length;u++)e(a[u]);var l=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var s=n("85ec"),r=n.n(s);r.a},"53f5":function(t,e,n){"use strict";var s=n("b08c"),r=n.n(s);r.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Header"),n("router-view"),n("Footer")],1)},i=[],o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-container",[s("b-row",[s("b-col",{attrs:{cols:"12"}},[s("img",{attrs:{alt:"Vue logo",src:n("cf05")}})]),"/"===t.currentDir?s("b-col",{attrs:{cols:"12"}},[t.isSignUp&&!t.isAuthenticated?s("h1",{staticClass:"text-center my-5",staticStyle:{"font-size":"1.5rem"}},[t._v("新規登録画面")]):s("h1",{staticClass:"text-center my-5",staticStyle:{"font-size":"1.5rem"}},[t._v("ログイン画面")])]):t._e()],1)],1)},a=[],c={computed:{currentDir:function(){return this.$route.path},isSignUp:function(){return this.$store.state.isSignUp},isAuthenticated:function(){return this.$store.getters.isAuthenticated}}},u=c,l=n("2877"),d=Object(l["a"])(u,o,a,!1,null,null,null),f=d.exports,p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",[n("b-row",{staticClass:"mt-5 mb-3"},[n("b-col",{attrs:{sm:"12"}},[t._v("Copyright© tak Inc. All rights reserved.")])],1)],1)},h=[],m={},b=Object(l["a"])(m,p,h,!1,null,null,null),g=b.exports,v={components:{Header:f,Footer:g}},U=v,w=(n("034f"),Object(l["a"])(U,r,i,!1,null,null,null)),y=w.exports,_=(n("f9e3"),n("2dd8"),n("5f5b")),x=n("b1e0"),C=n("8c4f"),S=n("59ca"),O=n.n(S);n("ea7b"),n("e71f");if(!O.a.apps.length){var k={apiKey:"AIzaSyCb3fC91PO7IxExGut54Dkdu67f3wMD0Oo",authDomain:"vue-cli-throwingmoney.firebaseapp.com",databaseURL:"https://vue-cli-throwingmoney.firebaseio.com",projectId:"vue-cli-throwingmoney",storageBucket:"vue-cli-throwingmoney.appspot.com",messagingSenderId:"884745452100",appId:"1:884745452100:web:71028fdb85ea9bdaebda11"};O.a.initializeApp(k)}var j=O.a.firestore(),M=(n("b0c0"),n("2f62"));s["default"].use(M["a"]);var $=new M["a"].Store({state:{isSignUp:!0,user:""},getters:{isAuthenticated:function(t){return!!t.user}},mutations:{doSignUp:function(t){t.isSignUp=!t.isSignUp},setUser:function(t,e){t.user=e}},actions:{doSignUp:function(t){var e=t.commit;e("doSignUp")},setUser:function(t,e){var n=t.commit;n("setUser",e)},signUp:function(t,e){var n=t.commit,s=t.dispatch;O.a.auth().createUserWithEmailAndPassword(e.email,e.password).then((function(t){var n=t.user;n.updateProfile({displayName:e.name}).then((function(){j.collection("users").doc(n.uid).set({uid:n.uid,displayName:n.displayName,deposit:1e3})})).then((function(){j.collection("users").doc(n.uid).get().then((function(t){s("setUser",t.data())}))}))})),n("doSignUp")}}}),A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("LoginForm")},E=[],N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",[n("b-row",{staticClass:"w-75 m-auto"},[t.isSignUp&&!t.isAuthenticated?n("b-col",{staticClass:"d-flex align-items-center pr-0 mb-2",attrs:{sm:"4"}},[n("label",{staticClass:"m-0"},[t._v("ユーザー名")])]):t._e(),t.isSignUp&&!t.isAuthenticated?n("b-col",{staticClass:"mb-2",attrs:{sm:"8"}},[n("b-form-input",{model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1):t._e(),n("b-col",{staticClass:"d-flex align-items-center pr-0 mb-2",attrs:{sm:"4"}},[n("label",{staticClass:"m-0"},[t._v("メールアドレス")])]),n("b-col",{staticClass:"mb-2",attrs:{sm:"8"}},[n("b-form-input",{model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),n("b-col",{staticClass:"d-flex align-items-center pr-0 mb-2",attrs:{sm:"4"}},[n("label",{staticClass:"m-0"},[t._v("パスワード")])]),n("b-col",{staticClass:"mb-2",attrs:{sm:"8"}},[n("b-form-input",{model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),n("b-row",[n("b-col",{attrs:{cols:"12"}},[t.isSignUp?n("b-button",{attrs:{to:"/dashboard",variant:"info"},nativeOn:{click:function(e){return t.signUp(e)}}},[t._v(" 新規登録 ")]):n("b-button",{attrs:{to:"/dashboard",variant:"info"},nativeOn:{click:function(e){return t.login(e)}}},[t._v(" ログイン ")]),t.isSignUp&&!t.isAuthenticated?n("router-link",{staticClass:"d-block mt-1",attrs:{to:"/dashboard"},nativeOn:{click:function(e){return t.login(e)}}},[t._v("ログインはこちらから")]):n("router-link",{staticClass:"d-block mt-1",staticStyle:{cursor:"pointer"},attrs:{to:"/"},nativeOn:{click:function(e){return t.reSignUp(e)}}},[t._v("新規登録はこちらから")])],1)],1)],1)},I=[],D=n("5530"),P={data:function(){return{name:"",email:"",password:""}},computed:{isSignUp:function(){return this.$store.state.isSignUp},isAuthenticated:function(){return this.$store.getters.isAuthenticated}},methods:Object(D["a"])(Object(D["a"])({},Object(M["b"])(["doSignUp","setUser"])),{},{signUp:function(){this.$store.dispatch("signUp",{email:this.email,password:this.password,name:this.name})},login:function(){var t=this;O.a.auth().signInWithEmailAndPassword(this.email,this.password).then((function(){t.doSignUp(),t.email="",t.password=""})).catch((function(t){console.log(t)}))},reSignUp:function(){var t=this;O.a.auth().signOut().then((function(){t.doSignUp()})).catch((function(t){console.log(t)}))}})},L=P,z=Object(l["a"])(L,N,I,!1,null,null,null),F=z.exports,W={components:{LoginForm:F}},T=W,V=Object(l["a"])(T,A,E,!1,null,null,null),H=V.exports,J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-container",[n("b-row",{staticClass:"d-flex align-items-center mt-3"},[t.currentUser?[n("b-col",{staticClass:"text-left",attrs:{sm:"6"}},[n("span",[t._v(t._s(t.currentUserName)+" さん、ようこそ！！！")])]),n("b-col",{staticClass:"text-right",attrs:{sm:"3"}},[n("span",[t._v("残高： ￥"+t._s(t.currentUserDeposit))])]),n("b-col",{staticClass:"text-right",attrs:{sm:"3"}},[n("b-button",{attrs:{to:"/",variant:"outline-info"},nativeOn:{click:function(e){return t.logout(e)}}},[t._v(" ログアウト ")])],1)]:[n("b-col",{staticClass:"mt-3",attrs:{cols:"12"}},[n("h4",[t._v("Loading…")])])]],2)],1),t.currentUser?[n("LoggedinUsers",{attrs:{currentUserUid:t.currentUserUid,currentUserDeposit:t.currentUserDeposit}})]:t._e()],2)},R=[],B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",[n("b-row",{staticClass:"d-flex align-items-center mt-3"},[n("b-col",{staticClass:"mt-3",attrs:{cols:"12"}},[n("h1",[t._v("ユーザ一覧")])]),n("b-col",{staticClass:"text-left",attrs:{cols:"12"}},[n("h3",[t._v("ユーザ名")])])],1),t._l(t.users,(function(e,s){return n("b-row",{key:e.uid,staticClass:"mb-1"},[e.uid!==t.currentUserUid?[n("b-col",{staticClass:"text-left",attrs:{sm:"7"}},[n("span",[t._v(t._s(e.displayName))])]),n("b-col",{staticClass:"d-sm-text-right pr-0",attrs:{sm:"3"}},[n("b-button",{attrs:{id:"show-btn",variant:"info"},on:{click:function(e){return t.showModalWallet(s)}}},[t._v("ウォレットを見る")])],1),n("b-col",{staticClass:"d-sm-text-right send_style",attrs:{sm:"2"}},[n("b-button",{attrs:{id:"show-btn",variant:"info"},on:{click:function(e){return t.showModalSend(s)}}},[t._v("送る")])],1)]:t._e()],2)})),n("b-modal",{ref:"my-modal-wallet",attrs:{centered:"","hide-footer":"",title:t.displayName+"さんのウォレット"}},[n("div",{staticClass:"d-block text-center"},[n("h3",[t._v("￥"+t._s(t.deposit))])]),n("b-button",{staticClass:"mt-3",attrs:{variant:"danger",block:""},on:{click:t.hideModal}},[t._v("Close")])],1),n("b-modal",{ref:"my-modal-send",attrs:{centered:"","hide-footer":"",title:"あなたの残高： ￥"+t.currentUserDeposit}},[n("div",{staticClass:"d-block text-center"},[n("h3",[t._v("ギフトする金額")]),n("b-form-input",{model:{value:t.throwingMoney,callback:function(e){t.throwingMoney=e},expression:"throwingMoney"}})],1),n("b-button",{staticClass:"mt-3",attrs:{variant:"danger",block:""},on:{click:function(e){return t.sendMoney()}}},[t._v("送信")])],1)],2)},G=[],K=(n("4160"),n("a434"),n("a9e3"),n("4d63"),n("ac1f"),n("25f0"),n("159b"),{props:["currentUserUid","currentUserDeposit"],mounted:function(){var t=this;j.collection("users").get().then((function(e){e.forEach((function(e){t.users.push(e.data())}))})),j.collection("users").onSnapshot((function(e){e.docChanges().forEach((function(e){var n=e.doc;"modified"===e.type&&n.data().uid!==t.currentUserUid?t.users.splice(t.renderingIndex,1,n.data()):"modified"===e.type&&n.data().uid===t.currentUserUid&&t.setUser(n.data())}))}))},data:function(){return{users:[],displayName:"",deposit:"",throwingMoney:"",renderingIndex:""}},methods:Object(D["a"])(Object(D["a"])({},Object(M["b"])(["setUser"])),{},{showModalWallet:function(t){this.$refs["my-modal-wallet"].show(),this.displayName=this.users[t].displayName,this.deposit=this.users[t].deposit},hideModal:function(){this.$refs["my-modal-wallet"].hide()},showModalSend:function(t){this.$refs["my-modal-send"].show(),this.renderingIndex=t},sendMoney:function(){var t=this,e=new RegExp(/^[0-9]+$/);e.test(this.throwingMoney)&&(j.collection("users").doc(this.users[this.renderingIndex].uid).update({deposit:Number(this.users[this.renderingIndex].deposit)+Number(this.throwingMoney)}).then((function(){t.$refs["my-modal-send"].hide(),t.throwingMoney=""})),j.collection("users").doc(this.currentUserUid).update({deposit:Number(this.currentUserDeposit)-Number(this.throwingMoney)}))}})}),q=K,Q=(n("53f5"),Object(l["a"])(q,B,G,!1,null,"c8980960",null)),X=Q.exports,Y={components:{LoggedinUsers:X},computed:{currentUser:function(){return this.$store.state.user},currentUserName:function(){return this.$store.state.user.displayName},currentUserDeposit:function(){return this.$store.state.user.deposit},currentUserUid:function(){return this.$store.state.user.uid}},methods:{logout:function(){O.a.auth().signOut().catch((function(t){console.log(t)}))}}},Z=Y,tt=Object(l["a"])(Z,J,R,!1,null,null,null),et=tt.exports;s["default"].use(C["a"]);var nt=new C["a"]({mode:"history",base:"/Vue-CLI-throwingMoney/",routes:[{path:"/",component:H},{path:"/dashboard",component:et,beforeEnter:function(t,e,n){O.a.auth().onAuthStateChanged((function(t){t?(console.log("router.js"),n()):n("/")}))}}]});nt.beforeEach((function(t,e,n){console.log("beforeEach"),O.a.auth().onAuthStateChanged((function(t){t?j.collection("users").doc(t.uid).get().then((function(t){$.commit("setUser",t.data())})):$.commit("setUser",null)})),n()}));var st=nt;s["default"].use(_["a"]),s["default"].use(x["a"]),s["default"].config.productionTip=!1,new s["default"]({router:st,store:$,render:function(t){return t(y)}}).$mount("#app")},"85ec":function(t,e,n){},b08c:function(t,e,n){},cf05:function(t,e,n){t.exports=n.p+"img/logo.82b9c7a5.png"}});
//# sourceMappingURL=app.4abdaef8.js.map